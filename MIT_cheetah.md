# **MIT四足机器人Cheetah 3控制方案理解笔记**

## **一、摆动腿控制：**

​		腿足机器人低速运动情况下每条腿都会在支持相（维持机器人身体高度以及姿态）、摆动相（将腿摆到期望的位置）之间循环交替。

​		![img](https://pica.zhimg.com/v2-a17c49a80ee81ea490f4e76dafc3d702_1440w.jpg)

接下来详细讲讲该公式（并附上c语言代码）：

**1、符号与变量含义：**

- **Pstep，i**：第 *i* 步的目标落脚点位置（矢量，包含空间坐标信息）。
- **Ph，i**：机器人**质心（或上半身参考点）在第 *i* 步的当前位置**（作为基础位置参考）。
- **Tcϕ**：**摆动周期**（机器人腿部从离地到落地后又离地前的一瞬间的时间，反映步态节奏）。
- **Pc，d**：**期望的质心速度**（设计中希望机器人质心达到的速度，控制运动方向与快慢）。
- **Z0**：**典型高度**（机器人质心到支撑面的垂直距离，反映机器人 “身高” 对平衡的影响，即站高）。
- **||g||**：**重力加速度的模**（约\(9.8m/s^2\)，重力是影响平衡的核心物理因素，可根据自己所在地区进行更改）。
- **Pc**：**实际的质心速度**（机器人质心当前的真实运动速度）。

















## **附：**

### **1、线性插值：**

​		线性插值的本质是**在两个已知数据点构成的线段上，根据目标点的位置比例，分配两点间的函数值差值**，其数学逻辑可拆解为 “比例法” 和 “参数方程法” 两种理解角度，最终推导结果完全一致。

**1）、数学推导：两种视角下的公式由来：**

​		假设已知两个 “锚点”：A(x0, y0) 和 B(x1, y1)，目标是求区间 [x0, x1] 内任意一点 x 对应的 y 值（记为 Y_interp）。

**视角 1：比例法（最直观）：**
		核心逻辑是 “**x 相对于 x0 的距离比例，等于 y 相对于 y0 的差值比例**”。
		第一步：计算 x 在 x0 到 x1 之间的 “位置占比” **α**（也叫 “插值系数”）：
$$
α = (x - x0)/(x1 - x0)
$$
​		第二步：根据 α 分配 y0 到 y1 的差值：
$$
Y_interp = y0 + α*(y1 - y0)
$$
​		合并后就是最常用的线性插值公式；
$$
Y_interp = y0 + (x - x0)/(x1 - x0)*(y1 - y0)
$$
**视角 2：参数方程法（更贴近几何意义：**

​		把 A 到 B 的线段看作 “随参数 t 变化的直线”，t∈[0,1]：

​		当  t=0 时，点在 A(x0, y0)；当 t=1 时，点在 B(x1, y1)，则直线的参数方程为：
$$
x(t) = x_0 + t \cdot (x_1 - x_0)
$$

$$
y(t) = y_0 + t \cdot (y_1 - y_0)
$$



**2）、进阶：从“两点插值”到“多点插值”：**

​		实际场景中很少只有两个数据点，更多是 “一组有序的离散数据”（如时间序列、空间网格数据），此时需要用 “分段线性插值”（Piecewise Linear Interpolation）—— 本质是 “在相邻两个锚点之间，分别用线性插值计算目标值”，核心是 “先找区间，再做插值”。

**分段线性插值的步骤：**

​		假设已知一组锚点：(x0,y0), (x1,y1), ..., (xn,yn)（需满足 x0 < x1 < ... < xn，即 x 单调递增），求任意 x 对应的 Y_interp：

​	**第一步：确定目标 x 所在的区间：**

​		